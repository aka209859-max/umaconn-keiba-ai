# データベース開発者への質問: soha_time と kohan_3f のフォーマット

## 背景

地方競馬のスピード指数計算で、`nvd_se.soha_time`（総破タイム）と `nvd_se.kohan_3f`（後半3F）から `zenhan_3f`（前半3F）を算出しようとしています。

## 現在のデータサンプル

大井競馬場（keibajo_code='44'）のデータ:

| 距離 | soha_time | kohan_3f | 着順 |
|------|-----------|----------|------|
| 1200m | 1149 | 387 | 03 |
| 1200m | 1148 | 380 | 02 |
| 1200m | 1146 | 382 | 01 |
| 1600m | 1431 | 395 | 02 |
| 1600m | 1424 | 402 | 01 |

- **型**: すべて `str` (文字列型)

## 質問1: soha_time のフォーマット

`soha_time = "1149"` は何を表していますか？

### パターンA: MMSS形式（分秒）
- `1149` = 11分49秒 = 709秒
- 計算: `minutes = 11, seconds = 49`
- 秒変換: `11 * 60 + 49 = 709秒`

### パターンB: SSS.S形式（秒の1/10）
- `1149` = 114.9秒
- 計算: `1149 / 10.0 = 114.9秒`

### パターンC: SSSS形式（秒の整数）
- `1149` = 1149秒 = 19分9秒

**どのパターンが正しいですか？**

---

## 質問2: kohan_3f のフォーマット

`kohan_3f = "387"` は何を表していますか？

### パターンA: SSS形式（秒の1/10）
- `387` = 38.7秒
- 計算: `387 / 10.0 = 38.7秒`

### パターンB: SS.S形式（秒の小数点付き）
- `387` = 3分87秒？（不自然）

### パターンC: SSS形式（秒の整数）
- `387` = 387秒 = 6分27秒？（不自然）

**どのパターンが正しいですか？**

---

## 質問3: 正しい計算式

`zenhan_3f`（前半3F）を算出する正しい計算式を教えてください。

### 現在の仮説
```python
# soha_time: 1149 → 1分14.9秒 = 74.9秒？
if len(soha_time_str) >= 3:
    minutes = int(soha_time_str[:-2])          # 11
    seconds_tenths = int(soha_time_str[-2:])   # 49
    soha_time_sec = minutes * 60 + seconds_tenths / 10.0  # 11*60 + 4.9 = 664.9

# kohan_3f: 387 → 38.7秒
kohan_3f_sec = float(kohan_3f_str) / 10.0  # 387 / 10.0 = 38.7

# zenhan_3f = 走破タイム - 後半3F
zenhan_3f = soha_time_sec - kohan_3f_sec  # 664.9 - 38.7 = 626.2秒？
```

**この仮説は正しいですか？**

---

## 実データの期待値

地方競馬の一般的なタイム:
- **1200m**:
  - 走破タイム: 約73-75秒
  - 前半3F: 約33-36秒
  - 後半3F: 約37-40秒
- **1600m**:
  - 走破タイム: 約100-103秒
  - 前半3F: 約60-65秒
  - 後半3F: 約38-42秒

---

## お願い

以下の情報を教えてください:

1. **soha_time の正確なフォーマット**（MMSS? SSS.S? SSSS?）
2. **kohan_3f の正確なフォーマット**（SSS? SS.S?）
3. **正しい変換式**（秒への変換方法）
4. **zenhan_3f の計算式**（存在する場合、データベースに保存されているか？）

---

## 現在の問題

現在の計算結果（異常値）:
```
門別 1000m: 前半3F=558.0秒  ← 正しくは 33秒付近のはず
大井 1600m: 前半3F=802.2秒  ← 正しくは 63秒付近のはず
```

**前半3Fが異常に大きい値になっています。**

---

**回答をお願いします！**
